{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome I try to gather my best tips for Home Assistant here, along with my configuration. About me I am a C# developer from Sweden, with a passion for IOT and smart homes in general and Home Assistant in particular. My Home Assistant Configuration I'm updating on a regular basis, but some things may not be up to date. I'm using the issues and project to keep track of bugs in my configuration and new features I want to make/use. Get in contact: Twitter Email I put a lot of work into making this repo available and updated to inspire and help others! If you want to, you can support me here:","title":"Home"},{"location":"#welcome","text":"I try to gather my best tips for Home Assistant here, along with my configuration.","title":"Welcome"},{"location":"#about-me","text":"I am a C# developer from Sweden, with a passion for IOT and smart homes in general and Home Assistant in particular.","title":"About me"},{"location":"#my-home-assistant-configuration","text":"I'm updating on a regular basis, but some things may not be up to date. I'm using the issues and project to keep track of bugs in my configuration and new features I want to make/use.","title":"My Home Assistant Configuration"},{"location":"#get-in-contact","text":"Twitter Email I put a lot of work into making this repo available and updated to inspire and help others! If you want to, you can support me here:","title":"Get in contact:"},{"location":"Automation/","text":"My favorite automations Sending notifications when we get mail or packages in mailbox. Package . Appdaemon app Setting air cleaner in bedroom to quiet at 9 pm (before bedtime) and auto at 11 am (when we are sure to have gotten out of bed), using Broadlink RM3 mini ir blaster. Package , Appdaemon app Set light status on a few lights inside and outdoors based on: Time of day and sun. Appdaemon app When we come home. Package Xiaomi switches toggles light (single press), a second light (double press) or dim and brighten lamp (long press). Appdaemon app Ikea Tr\u00e5dfri remote used to control Sonos. Appdaemon app Not so smart Roomba only vacuums when we're not home, starts using Broadlink RM3 mini ir blaster. Package Monitoring and notifications when washer is done. Package , Appdaemon app When someone uses the Ring Doorbell, flash lights in backyard and upstairs hallway. Package Notifications for cleaning cat litterboxes. Package , Appdaemon app","title":"Automation"},{"location":"Automation/#my-favorite-automations","text":"Sending notifications when we get mail or packages in mailbox. Package . Appdaemon app Setting air cleaner in bedroom to quiet at 9 pm (before bedtime) and auto at 11 am (when we are sure to have gotten out of bed), using Broadlink RM3 mini ir blaster. Package , Appdaemon app Set light status on a few lights inside and outdoors based on: Time of day and sun. Appdaemon app When we come home. Package Xiaomi switches toggles light (single press), a second light (double press) or dim and brighten lamp (long press). Appdaemon app Ikea Tr\u00e5dfri remote used to control Sonos. Appdaemon app Not so smart Roomba only vacuums when we're not home, starts using Broadlink RM3 mini ir blaster. Package Monitoring and notifications when washer is done. Package , Appdaemon app When someone uses the Ring Doorbell, flash lights in backyard and upstairs hallway. Package Notifications for cleaning cat litterboxes. Package , Appdaemon app","title":"My favorite automations"},{"location":"backups/","text":"","title":"Backups"},{"location":"batteries/","text":"Some time ago I got a hold of a list of what kind of batteries different sensors use. I haven't tried all of these out, but thought I'd share anyway. CR2032 (Xiaomi temp, Xiaomi buttons (switches), Visonic door sensor) CR123A (Fibaro pir, Neo Coolcam pir) CR1632 (Xiaomi door sensor) CR2450 (Xiaomi motion) CR14250 (Neo Coolcam door sensor) ER14250 (Fibaro door sensor)","title":"Batteries"},{"location":"components/","text":"163 Loaded Components: alarm_control_panel alarm_control_panel.bwalarm alarm_control_panel.verisure alert api auth automation binary_sensor binary_sensor.deconz binary_sensor.mqtt binary_sensor.ping binary_sensor.ring binary_sensor.template binary_sensor.verisure binary_sensor.workday binary_sensor.xiaomi_aqara binary_sensor.zwave calendar calendar.google camera camera.generic camera.mqtt camera.ring camera.verisure cast climate climate.zwave cloud config config.auth config.auth_provider_homeassistant config.automation config.config_entries config.core config.customize config.device_registry config.entity_registry config.group config.script config.zwave counter cover cover.deconz cover.mqtt cover.xiaomi_aqara cover.zwave custom_updater customizer deconz device_tracker discovery fan fan.zwave ffmpeg frontend google group hassio history homekit http ifttt input_boolean input_number input_select ios lifx light light.deconz light.group light.lifx light.mqtt light.rfxtrx light.template light.xiaomi_aqara light.zwave lock lock.verisure lock.xiaomi_aqara lock.zwave logbook logger lovelace map media_player media_player.androidtv media_player.cast media_player.plex media_player.samsungtv media_player.sonos media_player.spotify mqtt notify notify.discord notify.group notify.ios onboarding panel_custom panel_iframe plant proximity python_script recorder rest_command rfxtrx ring scene scene.deconz scene.homeassistant script sensor sensor.command_line sensor.darksky sensor.deconz sensor.glances sensor.history_stats sensor.imap_email_content sensor.ios sensor.krisinformation sensor.min_max sensor.mqtt sensor.plex_recently_added sensor.pollenkoll sensor.ring sensor.scrape sensor.speedtest sensor.systemmonitor sensor.template sensor.time_date sensor.trafikverket_weatherstation sensor.verisure sensor.version sensor.waze_travel_time sensor.xiaomi_aqara sensor.zwave shell_command shopping_list smhi sonos sun switch switch.broadlink switch.command_line switch.deconz switch.mqtt switch.rfxtrx switch.template switch.verisure switch.xiaomi_aqara switch.zwave system_log tts updater verisure weather weather.darksky weather.smhi webhook websocket_api xiaomi_aqara zeroconf zone zwave Custom Components I use Pollenkoll - Swedish component for pollen information in sensors. Plex Recently Added Krisinformation - My own component for getting alerts and news from a Swedish site. Android TV - Component to use with the addon for Android debug bridge. Custom Alarm Interface Custom Updater","title":"Components"},{"location":"components/#163-loaded-components","text":"alarm_control_panel alarm_control_panel.bwalarm alarm_control_panel.verisure alert api auth automation binary_sensor binary_sensor.deconz binary_sensor.mqtt binary_sensor.ping binary_sensor.ring binary_sensor.template binary_sensor.verisure binary_sensor.workday binary_sensor.xiaomi_aqara binary_sensor.zwave calendar calendar.google camera camera.generic camera.mqtt camera.ring camera.verisure cast climate climate.zwave cloud config config.auth config.auth_provider_homeassistant config.automation config.config_entries config.core config.customize config.device_registry config.entity_registry config.group config.script config.zwave counter cover cover.deconz cover.mqtt cover.xiaomi_aqara cover.zwave custom_updater customizer deconz device_tracker discovery fan fan.zwave ffmpeg frontend google group hassio history homekit http ifttt input_boolean input_number input_select ios lifx light light.deconz light.group light.lifx light.mqtt light.rfxtrx light.template light.xiaomi_aqara light.zwave lock lock.verisure lock.xiaomi_aqara lock.zwave logbook logger lovelace map media_player media_player.androidtv media_player.cast media_player.plex media_player.samsungtv media_player.sonos media_player.spotify mqtt notify notify.discord notify.group notify.ios onboarding panel_custom panel_iframe plant proximity python_script recorder rest_command rfxtrx ring scene scene.deconz scene.homeassistant script sensor sensor.command_line sensor.darksky sensor.deconz sensor.glances sensor.history_stats sensor.imap_email_content sensor.ios sensor.krisinformation sensor.min_max sensor.mqtt sensor.plex_recently_added sensor.pollenkoll sensor.ring sensor.scrape sensor.speedtest sensor.systemmonitor sensor.template sensor.time_date sensor.trafikverket_weatherstation sensor.verisure sensor.version sensor.waze_travel_time sensor.xiaomi_aqara sensor.zwave shell_command shopping_list smhi sonos sun switch switch.broadlink switch.command_line switch.deconz switch.mqtt switch.rfxtrx switch.template switch.verisure switch.xiaomi_aqara switch.zwave system_log tts updater verisure weather weather.darksky weather.smhi webhook websocket_api xiaomi_aqara zeroconf zone zwave","title":"163 Loaded Components:"},{"location":"components/#custom-components-i-use","text":"Pollenkoll - Swedish component for pollen information in sensors. Plex Recently Added Krisinformation - My own component for getting alerts and news from a Swedish site. Android TV - Component to use with the addon for Android debug bridge. Custom Alarm Interface Custom Updater","title":"Custom Components I use"},{"location":"dev/","text":"Other than this I try to contribute to the docs whenever I can. It's easy! Custom Components Krisinformation A custom component for getting alerts and news from the Swedish site krisinformation.se. Custom Lovelace Cards Krisinfo-card A custom card for displaying alerts and news from the custom component above.","title":"My Hass development"},{"location":"dev/#custom-components","text":"","title":"Custom Components"},{"location":"dev/#krisinformation","text":"A custom component for getting alerts and news from the Swedish site krisinformation.se.","title":"Krisinformation"},{"location":"dev/#custom-lovelace-cards","text":"","title":"Custom Lovelace Cards"},{"location":"dev/#krisinfo-card","text":"A custom card for displaying alerts and news from the custom component above.","title":"Krisinfo-card"},{"location":"ecosystem/","text":"My Smart Home Kit on kit.com - everything is not in there just yet Protocols and Hubs Broadlink RM3 mini IR-blasters Home made MiLight hub RFXtrx433E (433 mhz) Zigbee: Conbee, Xiaomi Gateway Zwave: Aeon Labs Z Wave Stick (GEN 5) Lights Fibaro Dimmer 2 Hue lightstrip Hue rgb LIFX Mini White MiLights Tr\u00e5dfri Plugs Fibaro Wall Plugs Telldus IP44 plugs Telldus plugs Phones, tablet and smart watches Ios-devices (iPhones, Apple watches, iPad mini) Media Chromecast Nvidia Shield TV Plex Media Server Samsung Media System Sonos Play3 Synology NAS Samsung smart tv's Security Lock Sensor hacked from a Xiaomi Door/Window sensor Neo Coolcam Door/Window sensor Neo Coolcam Flood sensor Neo Coolcam Pirs Ring Doorbell 2 with one Chime (upstairs) and one Chime pro (downstairs) Sannce IP camera Sensative Strips Door Sensor Xiaomi Dafang camera Xiaomi Door/Window sensors Xiaomi Flood sensor Xiaomi Pirs Xiaomi Smoke Sensors Yale Doorman via Verisure Remotes Tr\u00e5dfri remotes and dimmers Xiaomi switches Climate Electrolux Air Cleaner Z9124 Xiaomi Temperature and Humidity Sensors Voice Assistants Amazon Echo Dot (currently not in use) Siri, mainly on Apple Watch Misc IRobot Roomba 880 Pax Calima Bluetooth Bathroom Fan (currently not included) Raspberry Pi 3 Raspberry Pi 3 connected to 24\" screen as dashboard Raspberry Pi 3 with 7\" Touchscreen as dashboard Switchbots Tile BT tracker Withings WS-50 Smart Scale (currently not included) Xiaomi MiFloras (plant sensors) Xiaomi Vibration Sensor","title":"My Smart Home"},{"location":"ecosystem/#protocols-and-hubs","text":"Broadlink RM3 mini IR-blasters Home made MiLight hub RFXtrx433E (433 mhz) Zigbee: Conbee, Xiaomi Gateway Zwave: Aeon Labs Z Wave Stick (GEN 5)","title":"Protocols and Hubs"},{"location":"ecosystem/#lights","text":"Fibaro Dimmer 2 Hue lightstrip Hue rgb LIFX Mini White MiLights Tr\u00e5dfri","title":"Lights"},{"location":"ecosystem/#plugs","text":"Fibaro Wall Plugs Telldus IP44 plugs Telldus plugs","title":"Plugs"},{"location":"ecosystem/#phones-tablet-and-smart-watches","text":"Ios-devices (iPhones, Apple watches, iPad mini)","title":"Phones, tablet and smart watches"},{"location":"ecosystem/#media","text":"Chromecast Nvidia Shield TV Plex Media Server Samsung Media System Sonos Play3 Synology NAS Samsung smart tv's","title":"Media"},{"location":"ecosystem/#security","text":"Lock Sensor hacked from a Xiaomi Door/Window sensor Neo Coolcam Door/Window sensor Neo Coolcam Flood sensor Neo Coolcam Pirs Ring Doorbell 2 with one Chime (upstairs) and one Chime pro (downstairs) Sannce IP camera Sensative Strips Door Sensor Xiaomi Dafang camera Xiaomi Door/Window sensors Xiaomi Flood sensor Xiaomi Pirs Xiaomi Smoke Sensors Yale Doorman via Verisure","title":"Security"},{"location":"ecosystem/#remotes","text":"Tr\u00e5dfri remotes and dimmers Xiaomi switches","title":"Remotes"},{"location":"ecosystem/#climate","text":"Electrolux Air Cleaner Z9124 Xiaomi Temperature and Humidity Sensors","title":"Climate"},{"location":"ecosystem/#voice-assistants","text":"Amazon Echo Dot (currently not in use) Siri, mainly on Apple Watch","title":"Voice Assistants"},{"location":"ecosystem/#misc","text":"IRobot Roomba 880 Pax Calima Bluetooth Bathroom Fan (currently not included) Raspberry Pi 3 Raspberry Pi 3 connected to 24\" screen as dashboard Raspberry Pi 3 with 7\" Touchscreen as dashboard Switchbots Tile BT tracker Withings WS-50 Smart Scale (currently not included) Xiaomi MiFloras (plant sensors) Xiaomi Vibration Sensor","title":"Misc"},{"location":"featured/","text":"Home Assistant Podcast 25 \u2013 0.69, Google Maps and Isabella Joins us I joined Rohan and Phil to talk about my smart home. Home Assistant: State of the Union 2018 Paulus featured my Lovelace in his State of the Union 2018 . Home Assistant demo A stripped down version of my Lovelace is featured in the demo for Home Assistant.","title":"Featured"},{"location":"featured/#home-assistant-podcast-25-069-google-maps-and-isabella-joins-us","text":"I joined Rohan and Phil to talk about my smart home.","title":"Home Assistant Podcast 25 \u2013 0.69, Google Maps and Isabella Joins us"},{"location":"featured/#home-assistant-state-of-the-union-2018","text":"Paulus featured my Lovelace in his State of the Union 2018 .","title":"Home Assistant: State of the Union 2018"},{"location":"featured/#home-assistant-demo","text":"A stripped down version of my Lovelace is featured in the demo for Home Assistant.","title":"Home Assistant demo"},{"location":"hass/","text":"Hass.io (in Docker!) I am Running Hass.io on this Intel Nuc with Ubuntu Server 16.04, in Docker. To run Hass.io this way, install manually in Docker . On the contrary to what some might say or think, this is not overly complicated and it's not layering OS's and VM's on top of each other. I have Docker CE, and Home Assistant runs two containers to start with; one for the Home Assistant software and one for the Supervisor (that's the Hass.io specific part, one could say, although you can't just install that on top of a regular Home Assistant docker and get Hass.io). Then every add-on I install gets it's own docker container. That's really almost all there is to it. Pros and cons Okey, I haven't really found any real cons yet to this setup, so this'll mostly be pros. When Hass.io first came as an installation method I was heavily against ever trying it out. It seemed very boxed in. When I decided to move my setup from a Raspberry Pi 3 to a Nuc it had come a long way though, already. I didn't need to use the HassOS (then ResinOS) image, but could install manually, thus keeping the option of having other things, totally non-related to Hass or even smart homes, on the same machine. Now there's a lot of add-ons for all sorts of stuff, but if I find something I want that's not available as an add-on I can just install it in Docker the \"regular way\" and get it going in minutes. I did have to learn how to operate docker, but I just think that's fun (at least when you have a huge community that's ready to save you when you f*ck up). At the same time as I get all the good stuff with Hass.io (snapshots, add-ons, easy to use managing interface) I also get all the freedom of a non-Hass.io setup. I have yet to find something I can't do with this setup that I could with another. The moce to a Nuc also saves me a lot of headache with SD cards that suddenly stop working due to an electrical outage and - oh - the time I save with restarts! Organizing the configuration My configuration is broken down into packages , sort of mini configuration-files. This makes it easy to see everything pertaining to a specific implementation. I am just now in the process of restructuring my config, but most things still reside in the packages folder. Packages While using packages you can no longer reload your config with the buttons in the ui. Most of my more advanced automations are migrated to Appdaemon apps.","title":"Home Assistant"},{"location":"hass/#hassio-in-docker","text":"I am Running Hass.io on this Intel Nuc with Ubuntu Server 16.04, in Docker. To run Hass.io this way, install manually in Docker . On the contrary to what some might say or think, this is not overly complicated and it's not layering OS's and VM's on top of each other. I have Docker CE, and Home Assistant runs two containers to start with; one for the Home Assistant software and one for the Supervisor (that's the Hass.io specific part, one could say, although you can't just install that on top of a regular Home Assistant docker and get Hass.io). Then every add-on I install gets it's own docker container. That's really almost all there is to it.","title":"Hass.io (in Docker!)"},{"location":"hass/#pros-and-cons","text":"Okey, I haven't really found any real cons yet to this setup, so this'll mostly be pros. When Hass.io first came as an installation method I was heavily against ever trying it out. It seemed very boxed in. When I decided to move my setup from a Raspberry Pi 3 to a Nuc it had come a long way though, already. I didn't need to use the HassOS (then ResinOS) image, but could install manually, thus keeping the option of having other things, totally non-related to Hass or even smart homes, on the same machine. Now there's a lot of add-ons for all sorts of stuff, but if I find something I want that's not available as an add-on I can just install it in Docker the \"regular way\" and get it going in minutes. I did have to learn how to operate docker, but I just think that's fun (at least when you have a huge community that's ready to save you when you f*ck up). At the same time as I get all the good stuff with Hass.io (snapshots, add-ons, easy to use managing interface) I also get all the freedom of a non-Hass.io setup. I have yet to find something I can't do with this setup that I could with another. The moce to a Nuc also saves me a lot of headache with SD cards that suddenly stop working due to an electrical outage and - oh - the time I save with restarts!","title":"Pros and cons"},{"location":"hass/#organizing-the-configuration","text":"My configuration is broken down into packages , sort of mini configuration-files. This makes it easy to see everything pertaining to a specific implementation. I am just now in the process of restructuring my config, but most things still reside in the packages folder. Packages While using packages you can no longer reload your config with the buttons in the ui. Most of my more advanced automations are migrated to Appdaemon apps.","title":"Organizing the configuration"},{"location":"hassio-addons/","text":"Add-ons A better presence (beta) Android Debug Bridge (to get Android Tv in Hass) AirSonos AppDaemon Backup Hass.io to Google Drive Check Home Assistant Configuration - official addon deCONZ IDE Let's Encrypt - official addon Log Viewer Maria DB - official addon Mosquitto broker - official addon MQTT Server & Web Client (I only use the web client) motionEye Samba Share - official addon Repos Collection of repos Community Hass.io Add-ons for Home Assistant","title":"Addons"},{"location":"hassio-addons/#add-ons","text":"A better presence (beta) Android Debug Bridge (to get Android Tv in Hass) AirSonos AppDaemon Backup Hass.io to Google Drive Check Home Assistant Configuration - official addon deCONZ IDE Let's Encrypt - official addon Log Viewer Maria DB - official addon Mosquitto broker - official addon MQTT Server & Web Client (I only use the web client) motionEye Samba Share - official addon","title":"Add-ons"},{"location":"hassio-addons/#repos","text":"Collection of repos Community Hass.io Add-ons for Home Assistant","title":"Repos"},{"location":"linux-commands/","text":"Commands I find useful Check the 200 latest rows in the log (good for knowing why something went wrong) Increase number for more rows, or skip to get the whole log. If log have rotated since incident add .1 after syslog. sudo tail -n 200 /var/log/syslog Check ram memory free -m Check how much ram and cpu docker containers use sudo docker stats Subscribe to all messages published on Mosquitto mqtt broker Replace \\# with monitor/# to follow all messages on \"monitor\" topic, or other topic you'd like to follow. mosquitto_sub -u username -P password -v -t \\# Rotate logs in /var/log Good if logs grow too big. After running, delete all files with \".1\". sudo logrotate -f /etc/logrotate.conf Check what's using cpu top Set up cron jobs to for example restart service, reboot or other stuff sudo crontab - e then 55 * * * * systemctl restart monitor.service The above cron expression runs at hh.55 every hour. Cron expression examples Command cli for non Hass.io users hassctl","title":"Linux Commands"},{"location":"linux-commands/#commands-i-find-useful","text":"","title":"Commands I find useful"},{"location":"linux-commands/#check-the-200-latest-rows-in-the-log-good-for-knowing-why-something-went-wrong","text":"Increase number for more rows, or skip to get the whole log. If log have rotated since incident add .1 after syslog. sudo tail -n 200 /var/log/syslog","title":"Check the 200 latest rows in the log (good for knowing why something went wrong)"},{"location":"linux-commands/#check-ram-memory","text":"free -m","title":"Check ram memory"},{"location":"linux-commands/#check-how-much-ram-and-cpu-docker-containers-use","text":"sudo docker stats","title":"Check how much ram and cpu docker containers use"},{"location":"linux-commands/#subscribe-to-all-messages-published-on-mosquitto-mqtt-broker","text":"Replace \\# with monitor/# to follow all messages on \"monitor\" topic, or other topic you'd like to follow. mosquitto_sub -u username -P password -v -t \\#","title":"Subscribe to all messages published on Mosquitto mqtt broker"},{"location":"linux-commands/#rotate-logs-in-varlog","text":"Good if logs grow too big. After running, delete all files with \".1\". sudo logrotate -f /etc/logrotate.conf","title":"Rotate logs in /var/log"},{"location":"linux-commands/#check-whats-using-cpu","text":"top","title":"Check what's using cpu"},{"location":"linux-commands/#set-up-cron-jobs-to-for-example-restart-service-reboot-or-other-stuff","text":"sudo crontab - e then 55 * * * * systemctl restart monitor.service The above cron expression runs at hh.55 every hour. Cron expression examples","title":"Set up cron jobs to for example restart service, reboot or other stuff"},{"location":"linux-commands/#command-cli-for-non-hassio-users","text":"hassctl","title":"Command cli for non Hass.io users"},{"location":"lovelace/","text":"Custom cards Great compilation of Lovelace resources: sharethelove.io New to custom cards? Read this before you try to add some . I'm using yaml mode, with includes. My main Lovelace-file is found here , and my folder with includes here . This is very much still a work in progress, so files might not correspond exactly to screenshots. I put a lot of work into making this repo available and updated to inspire and help others! If you want to, you can support me here: Examples from my Lovelace gui I have tried to make a gui that is mobile first, since that's how I most often look at it, scroll down for mobile examples. Click on the images to get to the corresponding yaml-file. Desktop Home view Home info Lights System info Automations Mobile Home view Home info Lights System info Cameras Traffic","title":"Lovelace"},{"location":"lovelace/#examples-from-my-lovelace-gui","text":"I have tried to make a gui that is mobile first, since that's how I most often look at it, scroll down for mobile examples. Click on the images to get to the corresponding yaml-file.","title":"Examples from my Lovelace gui"},{"location":"lovelace/#desktop","text":"","title":"Desktop"},{"location":"lovelace/#home-view","text":"","title":"Home view"},{"location":"lovelace/#home-info","text":"","title":"Home info"},{"location":"lovelace/#lights","text":"","title":"Lights"},{"location":"lovelace/#system-info","text":"","title":"System info"},{"location":"lovelace/#automations","text":"","title":"Automations"},{"location":"lovelace/#mobile","text":"","title":"Mobile"},{"location":"lovelace/#home-view_1","text":"","title":"Home view"},{"location":"lovelace/#home-info_1","text":"","title":"Home info"},{"location":"lovelace/#lights_1","text":"","title":"Lights"},{"location":"lovelace/#system-info_1","text":"","title":"System info"},{"location":"lovelace/#cameras","text":"","title":"Cameras"},{"location":"lovelace/#traffic","text":"","title":"Traffic"},{"location":"presence-detection/","text":"One of the most important things in a home automation setup is presence detection. You can do so much and so much can fail if it doesn't work properly. Presence detection methods I use iOS app for Hass - gps Nmap - wifi BT tracking - bluetooth None of these methods are 100 % on their own (even though the iOS app have been almost there since the release of v1.5). For example the wifi on phones tend to go into sleep mode when not used. Add some automations to that and you have all your lights go on as if you just came home, in the middle of the night. This is why I use three different methods, combining them into one sensor that I then use for my automations. Rudimentary this can be done with putting all trackers in a group, the group will always be \"home\" if one of the devices is home. But I wanted more. I read Phil Hawthornes blog post about presence and tried his idea out. It still wasn't 100 %, even though having your automations fire at \"Just arrived\" instead of \"Home\" makes a difference (read the blog post if you don't understand what I'm talking about). I needs some more logic to it. Better presence detection I've been using the \"Better presence\" Appdaemon app from helto4real , that knits gps, bt and wifi tracking together into one tracker, with some advanced logic. For example bt and wifi trackers immediately sets the combined tracker to \"Just arrived\" if you are away and one of them shows home. If both of them are away, but gps is still home, it checks how long ago it was that the gps tracker last reported you were home before deciding what to do. This kind of logic is what gets it as close to 100 % as possible. Things can still go wrong of course, it's \"only\" technology, but I think this is about as good as it gets. The same guy recently released a beta of an Hass.io addon that does the same thing. Get it here: A better presence . I'm trying it out right now!","title":"Presence Detection"},{"location":"presence-detection/#presence-detection-methods-i-use","text":"iOS app for Hass - gps Nmap - wifi BT tracking - bluetooth None of these methods are 100 % on their own (even though the iOS app have been almost there since the release of v1.5). For example the wifi on phones tend to go into sleep mode when not used. Add some automations to that and you have all your lights go on as if you just came home, in the middle of the night. This is why I use three different methods, combining them into one sensor that I then use for my automations. Rudimentary this can be done with putting all trackers in a group, the group will always be \"home\" if one of the devices is home. But I wanted more. I read Phil Hawthornes blog post about presence and tried his idea out. It still wasn't 100 %, even though having your automations fire at \"Just arrived\" instead of \"Home\" makes a difference (read the blog post if you don't understand what I'm talking about). I needs some more logic to it.","title":"Presence detection methods I use"},{"location":"presence-detection/#better-presence-detection","text":"I've been using the \"Better presence\" Appdaemon app from helto4real , that knits gps, bt and wifi tracking together into one tracker, with some advanced logic. For example bt and wifi trackers immediately sets the combined tracker to \"Just arrived\" if you are away and one of them shows home. If both of them are away, but gps is still home, it checks how long ago it was that the gps tracker last reported you were home before deciding what to do. This kind of logic is what gets it as close to 100 % as possible. Things can still go wrong of course, it's \"only\" technology, but I think this is about as good as it gets. The same guy recently released a beta of an Hass.io addon that does the same thing. Get it here: A better presence . I'm trying it out right now!","title":"Better presence detection"}]}